var se=Object.defineProperty;var le=(e,t,o)=>t in e?se(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var W=(e,t,o)=>(le(e,typeof t!="symbol"?t+"":t,o),o);import{s as X,B as de,H as B,a as $,aC as A,q as z,r as x,u as Y,_ as J,j as Q,w as O,x as ee,aD as ce,aE as h,aF as ue,f as L,i as j,k as D,R as M,l as n,n as R,G as T}from"./vendor.1e34d539.js";import{t as te,_ as pe,i as fe,a as ge}from"./lodash.2908e93a.js";import{K as S}from"./konva.1335705c.js";const he=["children","className","color","disabled","disableFocusRipple","fullWidth","onChange","onClick","selected","size","value"],ve=e=>{const{classes:t,fullWidth:o,selected:r,disabled:a,size:l,color:u}=e,i={root:["root",r&&"selected",a&&"disabled",o&&"fullWidth",`size${B(l)}`,u]};return ee(i,ce,t)},xe=X(de,{name:"MuiToggleButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[`size${B(o.size)}`]]}})(({theme:e,ownerState:t})=>{let o=t.color==="standard"?e.palette.text.primary:e.palette[t.color].main,r;return e.vars&&(o=t.color==="standard"?e.vars.palette.text.primary:e.vars.palette[t.color].main,r=t.color==="standard"?e.vars.palette.text.primaryChannel:e.vars.palette[t.color].mainChannel),$({},e.typography.button,{borderRadius:(e.vars||e).shape.borderRadius,padding:11,border:`1px solid ${(e.vars||e).palette.divider}`,color:(e.vars||e).palette.action.active},t.fullWidth&&{width:"100%"},{[`&.${A.disabled}`]:{color:(e.vars||e).palette.action.disabled,border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:z(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${A.selected}`]:{color:o,backgroundColor:e.vars?`rgba(${r} / ${e.vars.palette.action.selectedOpacity})`:z(o,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${r} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:z(o,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${r} / ${e.vars.palette.action.selectedOpacity})`:z(o,e.palette.action.selectedOpacity)}}}},t.size==="small"&&{padding:7,fontSize:e.typography.pxToRem(13)},t.size==="large"&&{padding:15,fontSize:e.typography.pxToRem(15)})}),me=x.exports.forwardRef(function(t,o){const r=Y({props:t,name:"MuiToggleButton"}),{children:a,className:l,color:u="standard",disabled:i=!1,disableFocusRipple:f=!1,fullWidth:d=!1,onChange:p,onClick:_,selected:m,size:c="medium",value:v}=r,y=J(r,he),g=$({},r,{color:u,disabled:i,disableFocusRipple:f,fullWidth:d,size:c}),k=ve(g),P=s=>{_&&(_(s,v),s.defaultPrevented)||p&&p(s,v)};return Q(xe,$({className:O(k.root,l),disabled:i,focusRipple:!f,ref:o,onClick:P,onChange:p,value:v,ownerState:g,"aria-pressed":m},y,{children:a}))}),I=me;function ye(e,t){return t===void 0||e===void 0?!1:Array.isArray(t)?t.indexOf(e)>=0:e===t}const be=["children","className","color","disabled","exclusive","fullWidth","onChange","orientation","size","value"],$e=e=>{const{classes:t,orientation:o,fullWidth:r,disabled:a}=e,l={root:["root",o==="vertical"&&"vertical",r&&"fullWidth"],grouped:["grouped",`grouped${B(o)}`,a&&"disabled"]};return ee(l,ue,t)},_e=X("div",{name:"MuiToggleButtonGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[{[`& .${h.grouped}`]:t.grouped},{[`& .${h.grouped}`]:t[`grouped${B(o.orientation)}`]},t.root,o.orientation==="vertical"&&t.vertical,o.fullWidth&&t.fullWidth]}})(({ownerState:e,theme:t})=>$({display:"inline-flex",borderRadius:(t.vars||t).shape.borderRadius},e.orientation==="vertical"&&{flexDirection:"column"},e.fullWidth&&{width:"100%"},{[`& .${h.grouped}`]:$({},e.orientation==="horizontal"?{"&:not(:first-of-type)":{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0},"&:not(:last-of-type)":{borderTopRightRadius:0,borderBottomRightRadius:0},[`&.${h.selected} + .${h.grouped}.${h.selected}`]:{borderLeft:0,marginLeft:0}}:{"&:not(:first-of-type)":{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0},"&:not(:last-of-type)":{borderBottomLeftRadius:0,borderBottomRightRadius:0},[`&.${h.selected} + .${h.grouped}.${h.selected}`]:{borderTop:0,marginTop:0}})})),Ce=x.exports.forwardRef(function(t,o){const r=Y({props:t,name:"MuiToggleButtonGroup"}),{children:a,className:l,color:u="standard",disabled:i=!1,exclusive:f=!1,fullWidth:d=!1,onChange:p,orientation:_="horizontal",size:m="medium",value:c}=r,v=J(r,be),y=$({},r,{disabled:i,fullWidth:d,orientation:_,size:m}),g=$e(y),k=(s,C)=>{if(!p)return;const q=c&&c.indexOf(C);let w;c&&q>=0?(w=c.slice(),w.splice(q,1)):w=c?c.concat(C):[C],p(s,w)},P=(s,C)=>{!p||p(s,c===C?null:C)};return Q(_e,$({role:"group",className:O(g.root,l),ref:o,ownerState:y},v,{children:x.exports.Children.map(a,s=>x.exports.isValidElement(s)?x.exports.cloneElement(s,{className:O(g.grouped,s.props.className),onChange:f?P:k,selected:s.props.selected===void 0?ye(s.props.value,c):s.props.selected,size:s.props.size||m,fullWidth:d,color:s.props.color||u,disabled:s.props.disabled||i}):null)}))}),Re=Ce;var E={},Te=j.exports;Object.defineProperty(E,"__esModule",{value:!0});var oe=E.default=void 0,we=Te(L()),ze=D,Se=(0,we.default)((0,ze.jsx)("path",{d:"M18 4H6c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H6V6h12v12z"}),"CropSquare");oe=E.default=Se;var F={},Be=j.exports;Object.defineProperty(F,"__esModule",{value:!0});var re=F.default=void 0,Me=Be(L()),ke=D,Pe=(0,Me.default)((0,ke.jsx)("path",{d:"M5 4v3h5.5v12h3V7H19V4z"}),"Title");re=F.default=Pe;var G={},We=j.exports;Object.defineProperty(G,"__esModule",{value:!0});var ae=G.default=void 0,Ie=We(L()),Oe=D,Ne=(0,Ie.default)((0,Oe.jsx)("path",{d:"m17.27 6.73-4.24 10.13-1.32-3.42-.32-.83-.82-.32-3.43-1.33 10.13-4.23M21 3 3 10.53v.98l6.84 2.65L12.48 21h.98L21 3z"}),"NearMeOutlined");ae=G.default=Ne;const N=e=>e.palette.mode==="light"?e.palette.common.white:"transparent",Le=M.memo(()=>n(T,{sx:{width:74,padding:"8px 0",height:"100%",overflow:"auto",display:"flex",justifyContent:"center",flex:"none",backgroundColor:e=>N(e)},children:R(Re,{size:"large",color:"primary",orientation:"vertical",exclusive:!0,value:"select",sx:{bgcolor:e=>N(e)},children:[n(I,{value:"select","aria-label":"select",children:n(ae,{sx:{transform:"scaleX(-1)"}})}),n(I,{value:"square","aria-label":"square",children:n(oe,{})}),n(I,{value:"text","aria-label":"text",children:n(re,{})})]})})),je=M.memo(()=>n(T,{sx:{position:"absolute",top:0,left:0,width:1,height:1,zIndex:-1},children:R("svg",{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",children:[R("defs",{children:[n("pattern",{id:"smallGrid",width:"10",height:"10",patternUnits:"userSpaceOnUse",children:n("path",{d:"M 10 0 L 0 0 0 10",fill:"none",stroke:"rgba(207, 207, 207, 0.3)",strokeWidth:1})}),R("pattern",{id:"grid",width:"50",height:"50",patternUnits:"userSpaceOnUse",children:[n("rect",{width:"50",height:"50",fill:"url(#smallGrid)"}),n("path",{d:"M 50 0 L 0 0 0 50",fill:"none",stroke:"rgba(186, 186, 186, 0.5)",strokeWidth:1})]})]}),n("rect",{width:"100%",height:"100%",fill:"url(#grid)"})]})}));function De(){const e=x.exports.createRef(),t=M.memo(()=>R(T,{sx:{flex:1,minWidth:"1px",minHeight:"1px",position:"relative",overflow:"hidden"},children:[n(T,{ref:e,className:"container",style:{width:"100%",height:"100%"}}),n(je,{})]}));return{Content:x.exports.useCallback(()=>n(t,{}),[]),contentRef:e}}const Ee=M.memo(({children:e})=>n(T,{sx:{position:"relative",overflow:"hidden",flex:"none",width:320,backgroundColor:t=>N(t)},children:e}));class Fe extends S.Layer{constructor(o,r,a){super({name:"Template",listening:!1,imageSmoothingEnabled:!0});W(this,"_width");W(this,"_height");if(!o||o<=0)throw new Error("width not empty");if(!r||r<=0)throw new Error("height not empty");this._width=o,this._height=r,this.renderTemplate(a)}Size(o=!0){return o?{width:b.sizeToDPI(this._width),height:b.sizeToDPI(this._height)}:{width:this._width,height:this._height}}renderTemplate(o){const{width:r,height:a}=this.Size(),l=new S.Rect({name:"Template",width:r,height:a,fill:"#ffffff",x:0,y:0,strokeWidth:0,cornerRadius:0}),u=o.width(),i=o.height(),f=Math.min(u*.8/r,i*.8/a),d=b.toFixed(f,1);o.scale({x:d,y:d}),o.x(u/2-r*d/2),o.y(i/2-a*d/2),this.add(l)}}class Ge extends S.Stage{initEvent(t){t.forEach(o=>o.apply(this,[this]))}}var qe=te,U=1/0,Ae=17976931348623157e292;function Ue(e){if(!e)return e===0?e:0;if(e=qe(e),e===U||e===-U){var t=e<0?-1:1;return t*Ae}return e===e?e:0}var He=Ue,Ze=He;function Ke(e){var t=Ze(e),o=t%1;return t===t?o?t-o:t:0}var Ve=Ke;function Xe(e,t){for(var o=-1,r=e==null?0:e.length,a=Array(r);++o<r;)a[o]=t(e[o],o,e);return a}var Ye=Xe,Je=Array.isArray,Qe=Je,H=pe,et=Ye,tt=Qe,ot=fe,rt=1/0,Z=H?H.prototype:void 0,K=Z?Z.toString:void 0;function ie(e){if(typeof e=="string")return e;if(tt(e))return et(e,ie)+"";if(ot(e))return K?K.call(e):"";var t=e+"";return t=="0"&&1/e==-rt?"-0":t}var at=ie,it=at;function nt(e){return e==null?"":it(e)}var st=nt,lt=ge,dt=Ve,ct=te,V=st,ut=lt.isFinite,pt=Math.min;function ft(e){var t=Math[e];return function(o,r){if(o=ct(o),r=r==null?0:pt(dt(r),292),r&&ut(o)){var a=(V(o)+"e").split("e"),l=t(a[0]+"e"+(+a[1]+r));return a=(V(l)+"e").split("e"),+(a[0]+"e"+(+a[1]-r))}return t(o)}}var gt=ft,ht=gt,vt=ht("floor"),xt=vt;const ne={DPI:16,sizeToDPI(e){return e*ne.DPI},toFixed(e,t){return xt(e,t)},isMac(){return window.navigator.platform.toUpperCase().indexOf("MAC")>=0}},mt=S.Util._assign(ne,{Stage:Ge,Template:Fe});function yt(e){const r=e.getChildren().find(a=>a.name()==="Template");document.addEventListener("wheel",a=>a.preventDefault(),{passive:!1}),e.on("wheel",({evt:a})=>{if(a.preventDefault(),a.stopPropagation(),console.log(),!(b.isMac()?a.metaKey:a.ctrlKey)||!r)return;let i=e.scaleX();const f=e.width(),d=e.height(),{width:p,height:_}=r.Size(),m={x:e.getPointerPosition().x/i-e.x()/i,y:e.getPointerPosition().y/i-e.y()/i},c=a.deltaY;i=b.toFixed(i*.999**c,2),i>20&&(i=20),i<.1&&(i=.1);const v=p*i,y=_*i,g={x:(f-v)/2,y:(d-y)/2};(v>f*.8||y>d*.8)&&(g.x=-(m.x-e.getPointerPosition().x/i)*i,g.y=-(m.y-e.getPointerPosition().y/i)*i),e.scale({x:i,y:i}),e.position(g),e.batchDraw()})}const b=mt,Rt=()=>{const{Content:e,contentRef:t}=De();return x.exports.useEffect(()=>{if(!t.current)return;const o=t.current,{clientWidth:r,clientHeight:a}=o,l=new b.Stage({container:o,width:r,height:a}),u=new b.Template(50,30,l);l.add(u),l.initEvent([yt])},[]),R(T,{sx:{width:1,height:1,position:"relative",display:"flex"},children:[n(Le,{}),n(e,{}),n(Ee,{})]})};export{Rt as default};
